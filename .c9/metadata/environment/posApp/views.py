{"changed":true,"filter":false,"title":"views.py","tooltip":"/posApp/views.py","value":"from pickle import FALSE\nfrom django.shortcuts import redirect, render\nfrom django.http import HttpResponse\nfrom posApp.models import Category, Products, Sales, salesItems\nfrom django.db.models import Count, Sum\nfrom django.contrib import messages\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.contrib.auth.decorators import login_required\nfrom django.shortcuts import redirect\nimport json, sys\nfrom datetime import date, datetime\n\n# Login\ndef login_user(request):\n    logout(request)\n    resp = {\"status\":'failed','msg':''}\n    username = ''\n    password = ''\n    if request.POST:\n        username = request.POST['username']\n        password = request.POST['password']\n\n        user = authenticate(username=username, password=password)\n        if user is not None:\n            if user.is_active:\n                login(request, user)\n                resp['status']='success'\n            else:\n                resp['msg'] = \"Incorrect username or password\"\n        else:\n            resp['msg'] = \"Incorrect username or password\"\n    return HttpResponse(json.dumps(resp),content_type='application/json')\n\n#Logout\ndef logoutuser(request):\n    logout(request)\n    return redirect('/')\n\n# Create your views here.\n@login_required\ndef home(request):\n    now = datetime.now()\n    current_year = now.strftime(\"%Y\")\n    current_month = now.strftime(\"%m\")\n    current_day = now.strftime(\"%d\")\n    categories = len(Category.objects.all())\n    products = len(Products.objects.all())\n    transaction = len(Sales.objects.filter(\n        date_added__year=current_year,\n        date_added__month = current_month,\n        date_added__day = current_day\n    ))\n    today_sales = Sales.objects.filter(\n        date_added__year=current_year,\n        date_added__month = current_month,\n        date_added__day = current_day\n    ).all()\n    total_sales = sum(today_sales.values_list('grand_total',flat=True))\n    context = {\n        'page_title':'Home',\n        'categories' : categories,\n        'products' : products,\n        'transaction' : transaction,\n        'total_sales' : total_sales,\n    }\n    return render(request, 'posApp/home.html',context)\n\n\ndef about(request):\n    context = {\n        'page_title':'About',\n    }\n    return render(request, 'posApp/about.html',context)\n\n#Categories\n@login_required\ndef category(request):\n    category_list = Category.objects.all()\n    # category_list = {}\n    context = {\n        'page_title':'Category List',\n        'category':category_list,\n    }\n    return render(request, 'posApp/category.html',context)\n@login_required\ndef manage_category(request):\n    category = {}\n    if request.method == 'GET':\n        data =  request.GET\n        id = ''\n        if 'id' in data:\n            id= data['id']\n        if id.isnumeric() and int(id) > 0:\n            category = Category.objects.filter(id=id).first()\n    \n    context = {\n        'category' : category\n    }\n    return render(request, 'posApp/manage_category.html',context)\n\n@login_required\ndef save_category(request):\n    data =  request.POST\n    resp = {'status':'failed'}\n    try:\n        if (data['id']).isnumeric() and int(data['id']) > 0 :\n            save_category = Category.objects.filter(id = data['id']).update(name=data['name'], description = data['description'],status = data['status'])\n        else:\n            save_category = Category(name=data['name'], description = data['description'],status = data['status'])\n            save_category.save()\n        resp['status'] = 'success'\n        messages.success(request, 'Category Successfully saved.')\n    except:\n        resp['status'] = 'failed'\n    return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n\n@login_required\ndef delete_category(request):\n    data =  request.POST\n    resp = {'status':''}\n    try:\n        Category.objects.filter(id = data['id']).delete()\n        resp['status'] = 'success'\n        messages.success(request, 'Category Successfully deleted.')\n    except:\n        resp['status'] = 'failed'\n    return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n\n# Products\n@login_required\ndef products(request):\n    product_list = Products.objects.all()\n    context = {\n        'page_title':'Product List',\n        'products':product_list,\n    }\n    return render(request, 'posApp/products.html',context)\n@login_required\ndef manage_products(request):\n    product = {}\n    categories = Category.objects.filter(status = 1).all()\n    if request.method == 'GET':\n        data =  request.GET\n        id = ''\n        if 'id' in data:\n            id= data['id']\n        if id.isnumeric() and int(id) > 0:\n            product = Products.objects.filter(id=id).first()\n    \n    context = {\n        'product' : product,\n        'categories' : categories\n    }\n    return render(request, 'posApp/manage_product.html',context)\ndef test(request):\n    categories = Category.objects.all()\n    context = {\n        'categories' : categories\n    }\n    return render(request, 'posApp/test.html',context)\n\n\"\"\" \n@login_required\ndef save_product(request):\n    data =  request.POST\n    resp = {'status':'failed'}\n    id= ''\n    if 'id' in data:\n        id = data['id']\n    if id.isnumeric() and int(id) > 0:\n        check = Products.objects.exclude(id=id).filter(code=data['code']).all()\n    else:\n        check = Products.objects.filter(code=data['code']).all()\n    if len(check) > 0 :\n        resp['msg'] = \"Product Code Already Exists in the database\"\n    else:\n        category = Category.objects.filter(id = data['category_id']).first()\n        try:\n            if (data['id']).isnumeric() and int(data['id']) > 0 :\n                save_product = Products.objects.filter(id = data['id']).update(code=data['code'], category_id=category, name=data['name'], description = data['description'], price = float(data['price']),image = data['image'],status = data['status'])\n            else:\n                save_product = Products(code=data['code'], category_id=category, name=data['name'], description = data['description'], price = float(data['price']),image = data['image'],status = data['status'])\n                save_product.save()\n            resp['status'] = 'success'\n            messages.success(request, 'Product Successfully saved.')\n        except:\n            resp['status'] = 'failed'\n    return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n \"\"\"\n\"\"\" \n\n@login_required\ndef save_product(request):\n    if request.method == 'POST':\n        data = request.POST\n        files = request.FILES\n        resp = {'status': 'failed'}\n        id = data.get('id', '')\n\n        # Check for existing code\n        if id.isnumeric() and int(id) > 0:\n            check = Products.objects.exclude(id=id).filter(code=data['code']).all()\n        else:\n            check = Products.objects.filter(code=data['code']).all()\n\n        if len(check) > 0:\n            resp['msg'] = \"Product Code Already Exists in the database\"\n        else:\n            category = Category.objects.filter(id=data['category_id']).first()\n\n            try:\n                image = files.get('image', None)\n\n                if id.isnumeric() and int(id) > 0:\n                    product = Products.objects.get(id=id)\n                    product.code = data['code']\n                    product.category_id = category\n                    product.name = data['name']\n                    product.description = data['description']\n                    product.price = float(data['price'])\n                    product.status = data['status']\n\n                    if image:\n                        product.image = image  \n\n                    product.save()\n\n                    # Upload to S3 if image is provided\n                    import boto3\n                    from botocore.exceptions import NoCredentialsError, PartialCredentialsError\n\n                    bucket_name = \"x23344440-s3\"\n                    if object_name is None:\n                        object_name = product.name\n\n                    s3_client = boto3.client('s3', region_name=\"us-east-1\")\n                    \n                    try:\n                        s3_client.upload_fileobj(image, bucket_name, object_name)\n                        return True\n                    except (NoCredentialsError, PartialCredentialsError) as e:\n                        print(f\"Credentials error: {e}\")\n                        return False\n                    except Exception as e:\n                        print(f\"An error occurred: {e}\")\n                        return False\n                    \n                else:\n                    product = Products(\n                        code=data['code'],\n                        category_id=category,\n                        name=data['name'],\n                        description=data['description'],\n                        price=float(data['price']),\n                        status=data['status']\n                    )\n                    if image:\n                        product.image = image\n                    product.save()\n\n                resp['status'] = 'success'\n                messages.success(request, 'Product successfully saved.')\n            except Exception as e:\n                resp['status'] = 'failed'\n                resp['msg'] = f\"An error occurred: {str(e)}\"\n\n        return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n \"\"\"\n\n\n\n\n@login_required\ndef save_product(request):\n    if request.method == 'POST':\n        data = request.POST\n        files = request.FILES\n        resp = {'status': 'failed'}\n        id = data.get('id', '')\n\n        # Check for existing code\n        if id.isnumeric() and int(id) > 0:\n            check = Products.objects.exclude(id=id).filter(code=data['code']).all()\n        else:\n            check = Products.objects.filter(code=data['code']).all()\n\n        if check.exists():\n            resp['msg'] = \"Product Code Already Exists in the database\"\n        else:\n            category = Category.objects.filter(id=data['category_id']).first()\n\n            try:\n                image = files.get('image', None)\n\n                if id.isnumeric() and int(id) > 0:\n                    product = Products.objects.get(id=id)\n                else:\n                    product = Products()\n\n                # Update fields\n                product.code = data['code']\n                product.category_id = category\n                product.name = data['name']\n                product.description = data['description']\n                product.price = float(data['price'])\n                product.status = data['status']\n\n                if image:\n                    product.image = image  # Save to local media folder\n                product.save()\n\n                # Upload image to S3\n                if image:\n                    \n                    import boto3\n                    from botocore.exceptions import NoCredentialsError, PartialCredentialsError\n\n                    bucket_name = \"cpp-s3-x23335912\"\n                    object_name = f\"products/{image.name}\"  \n\n                    s3_client = boto3.client('s3', region_name=\"us-east-1\")\n\n                    try:\n                        image.seek(0)\n                        s3_client.upload_fileobj(image, bucket_name, object_name)\n                    except (NoCredentialsError, PartialCredentialsError) as e:\n                        print(f\"[S3 Credential Error] {e}\")\n                    except Exception as e:\n                        print(f\"[S3 Upload Error] {e}\")\n\n\n                resp['status'] = 'success'\n                messages.success(request, 'Product successfully saved.')\n\n            except Exception as e:\n                resp['status'] = 'failed'\n                resp['msg'] = f\"An error occurred: {str(e)}\"\n\n        return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n\n\n\n\n\n\n@login_required\ndef delete_product(request):\n    data =  request.POST\n    resp = {'status':''}\n    try:\n        Products.objects.filter(id = data['id']).delete()\n        resp['status'] = 'success'\n        messages.success(request, 'Product Successfully deleted.')\n    except:\n        resp['status'] = 'failed'\n    return HttpResponse(json.dumps(resp), content_type=\"application/json\")\n@login_required\ndef pos(request):\n    products = Products.objects.filter(status = 1)\n    product_json = []\n    for product in products:\n        product_json.append({'id':product.id, 'name':product.name, 'price':float(product.price)})\n    context = {\n        'page_title' : \"Point of Sale\",\n        'products' : products,\n        'product_json' : json.dumps(product_json)\n    }\n    # return HttpResponse('')\n    return render(request, 'posApp/pos.html',context)\n\n@login_required\ndef checkout_modal(request):\n    grand_total = 0\n    if 'grand_total' in request.GET:\n        grand_total = request.GET['grand_total']\n    context = {\n        'grand_total' : grand_total,\n    }\n    return render(request, 'posApp/checkout.html',context)\n\n\n\n@login_required\ndef save_pos(request):\n    resp = {'status':'failed','msg':''}\n    data = request.POST\n    pref = datetime.now().year + datetime.now().year\n    i = 1\n    while True:\n        code = '{:0>5}'.format(i)\n        i += int(1)\n        check = Sales.objects.filter(code = str(pref) + str(code)).all()\n        if len(check) <= 0:\n            break\n    code = str(pref) + str(code)\n\n    try:\n        sales = Sales(code=code, sub_total = data['sub_total'], tax = data['tax'], tax_amount = data['tax_amount'], grand_total = data['grand_total'], tendered_amount = data['tendered_amount'], amount_change = data['amount_change']).save()\n        sale_id = Sales.objects.last().pk\n        i = 0\n        for prod in data.getlist('product_id[]'):\n            product_id = prod \n            sale = Sales.objects.filter(id=sale_id).first()\n            product = Products.objects.filter(id=product_id).first()\n            qty = data.getlist('qty[]')[i] \n            price = data.getlist('price[]')[i] \n            total = float(qty) * float(price)\n            print({'sale_id' : sale, 'product_id' : product, 'qty' : qty, 'price' : price, 'total' : total})\n            salesItems(sale_id = sale, product_id = product, qty = qty, price = price, total = total).save()\n            i += int(1)\n        resp['status'] = 'success'\n        resp['sale_id'] = sale_id\n        messages.success(request, \"Sale Record has been saved.\")\n        lambda_result = call_lambda_via_api('New Sale Record Created',f\"sale id: {sale_id}, code: {code}, grand total: {data['grand_total']}\")\n        print(\"Lambda response:\", lambda_result)\n\n    except:\n        resp['msg'] = \"An error occured\"\n        print(\"Unexpected error:\", sys.exc_info()[0])\n    return HttpResponse(json.dumps(resp),content_type=\"application/json\")\n\n\n\n\n@login_required\ndef salesList(request):\n    sales = Sales.objects.all()\n    sale_data = []\n    for sale in sales:\n        data = {}\n        for field in sale._meta.get_fields(include_parents=False):\n            if field.related_model is None:\n                data[field.name] = getattr(sale,field.name)\n        data['items'] = salesItems.objects.filter(sale_id = sale).all()\n        data['item_count'] = len(data['items'])\n        if 'tax_amount' in data:\n            data['tax_amount'] = format(float(data['tax_amount']),'.2f')\n        # print(data)\n        sale_data.append(data)\n    # print(sale_data)\n    context = {\n        'page_title':'Sales Transactions',\n        'sale_data':sale_data,\n    }\n    # return HttpResponse('')\n    return render(request, 'posApp/sales.html',context)\n\n\nimport requests\n\n\ndef call_lambda_via_api(subject, message):\n    api_url = \"https://0lyjvc22p2.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912\"\n    headers = {'Content-Type': 'application/json'}\n\n    payload = {\n        \"subject\": subject,\n        \"message\": message\n    }\n\n    try:\n        res = requests.post(api_url, json=payload, headers=headers)\n        res.raise_for_status()\n        return res.json()\n    except requests.exceptions.RequestException as e:\n        print(\"Error calling Lambda:\", e)\n        return {\"error\": str(e)}\n\n\n\n\"\"\" \n@login_required\ndef receipt(request):\n    id = request.GET.get('id')\n    sales = Sales.objects.filter(id = id).first()\n    transaction = {}\n    for field in Sales._meta.get_fields():\n        if field.related_model is None:\n            transaction[field.name] = getattr(sales,field.name)\n    if 'tax_amount' in transaction:\n        transaction['tax_amount'] = format(float(transaction['tax_amount']))\n    ItemList = salesItems.objects.filter(sale_id = sales).all()\n    context = {\n        \"transaction\" : transaction,\n        \"salesItems\" : ItemList\n    }\n    return render(request, 'posApp/receipt.html',context)\n    # return HttpResponse('') \"\"\"\n\n\n\nfrom invoice_details_lib import get_transaction_date, get_transaction_code, get_current_date\n\n@login_required\ndef receipt(request):\n    id = request.GET.get('id')\n    sales = Sales.objects.filter(id=id).first()\n    transaction = {}\n\n    for field in Sales._meta.get_fields():\n        if field.related_model is None:\n            value = getattr(sales, field.name)\n\n            # Format date\n            if field.name == 'date_added':\n                transaction['date_added'] = get_transaction_code(datetime.now())\n            else:\n                transaction[field.name] = value\n\n    if 'tax_amount' in transaction:\n        transaction['tax_amount'] = format(float(transaction['tax_amount']), \".2f\")\n\n    transaction['transaction_code'] = get_transaction_code()\n\n    ItemList = salesItems.objects.filter(sale_id=sales).all()\n    context = {\n        \"transaction\": transaction,\n        \"salesItems\": ItemList\n    }\n    return render(request, 'posApp/receipt.html', context)\n\n\n\n@login_required\ndef delete_sale(request):\n    resp = {'status':'failed', 'msg':''}\n    id = request.POST.get('id')\n    try:\n        delete = Sales.objects.filter(id = id).delete()\n        resp['status'] = 'success'\n        messages.success(request, 'Sale Record has been deleted.')\n    except:\n        resp['msg'] = \"An error occured\"\n        print(\"Unexpected error:\", sys.exc_info()[0])\n    return HttpResponse(json.dumps(resp), content_type='application/json')","undoManager":{"mark":18,"position":19,"stack":[[{"start":{"row":451,"column":15},"end":{"row":451,"column":101},"action":"remove","lines":["https://9a1md6p2a0.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912"],"id":2},{"start":{"row":451,"column":15},"end":{"row":451,"column":101},"action":"insert","lines":["https://9a1md6p2a0.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912"]}],[{"start":{"row":451,"column":15},"end":{"row":451,"column":101},"action":"remove","lines":["https://9a1md6p2a0.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912"],"id":3},{"start":{"row":451,"column":15},"end":{"row":451,"column":101},"action":"insert","lines":["https://0lyjvc22p2.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912"]}],[{"start":{"row":450,"column":0},"end":{"row":450,"column":2},"action":"insert","lines":["# "],"id":4},{"start":{"row":451,"column":0},"end":{"row":451,"column":2},"action":"insert","lines":["# "]},{"start":{"row":452,"column":0},"end":{"row":452,"column":2},"action":"insert","lines":["# "]},{"start":{"row":454,"column":0},"end":{"row":454,"column":2},"action":"insert","lines":["# "]},{"start":{"row":455,"column":0},"end":{"row":455,"column":2},"action":"insert","lines":["# "]},{"start":{"row":456,"column":0},"end":{"row":456,"column":2},"action":"insert","lines":["# "]},{"start":{"row":457,"column":0},"end":{"row":457,"column":2},"action":"insert","lines":["# "]},{"start":{"row":458,"column":0},"end":{"row":458,"column":2},"action":"insert","lines":["# "]},{"start":{"row":459,"column":0},"end":{"row":459,"column":2},"action":"insert","lines":["# "]},{"start":{"row":460,"column":0},"end":{"row":460,"column":2},"action":"insert","lines":["# "]},{"start":{"row":462,"column":0},"end":{"row":462,"column":2},"action":"insert","lines":["# "]},{"start":{"row":463,"column":0},"end":{"row":463,"column":2},"action":"insert","lines":["# "]},{"start":{"row":464,"column":0},"end":{"row":464,"column":2},"action":"insert","lines":["# "]},{"start":{"row":465,"column":0},"end":{"row":465,"column":2},"action":"insert","lines":["# "]},{"start":{"row":466,"column":0},"end":{"row":466,"column":2},"action":"insert","lines":["# "]},{"start":{"row":467,"column":0},"end":{"row":467,"column":2},"action":"insert","lines":["# "]},{"start":{"row":468,"column":0},"end":{"row":468,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":468,"column":34},"end":{"row":469,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":469,"column":0},"end":{"row":470,"column":0},"action":"insert","lines":["",""]},{"start":{"row":470,"column":0},"end":{"row":471,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":471,"column":0},"end":{"row":487,"column":0},"action":"insert","lines":["def call_lambda_via_api(subject, message):","    api_url = \"https://0lyjvc22p2.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912\"","    headers = {'Content-Type': 'application/json'}","","    payload = {","        \"subject\": subject,","        \"message\": message","    }","","    try:","        res = requests.post(api_url, json=payload, headers=headers)","        res.raise_for_status()","        return res.json()","    except requests.exceptions.RequestException as e:","        print(\"Error calling Lambda:\", e)","        return {\"error\": str(e)}",""],"id":6}],[{"start":{"row":449,"column":0},"end":{"row":469,"column":0},"action":"remove","lines":["","# def call_lambda_via_api(subject, message):","#     api_url = \"https://0lyjvc22p2.execute-api.us-east-1.amazonaws.com/default/my-lambda-cpp-x23335912\"","#     headers = {'Content-Type': 'application/json'}","","#     # Wrap payload in a \"body\" key as a JSON string","#     payload = {","#         \"body\": json.dumps({","#             \"subject\": subject,","#             \"message\": message","#         })","#     }","","#     try:","#         res = requests.post(api_url, json=payload, headers=headers)","#         res.raise_for_status()","#         return res.json()","#     except requests.exceptions.RequestException as e:","#         print(\"Error calling Lambda:\", e)","#         return {\"error\": str(e)}",""],"id":7}],[{"start":{"row":489,"column":0},"end":{"row":493,"column":1},"action":"insert","lines":["from .invoice_details import (","    get_transaction_date,","    get_transaction_code,","    get_current_date,",")"],"id":8}],[{"start":{"row":494,"column":0},"end":{"row":495,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":495,"column":0},"end":{"row":496,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":495,"column":0},"end":{"row":496,"column":0},"action":"insert","lines":["from your_package_name import get_transaction_date, get_transaction_code, get_current_date",""],"id":10}],[{"start":{"row":495,"column":5},"end":{"row":495,"column":22},"action":"remove","lines":["your_package_name"],"id":11}],[{"start":{"row":495,"column":5},"end":{"row":495,"column":6},"action":"insert","lines":["i"],"id":12},{"start":{"row":495,"column":6},"end":{"row":495,"column":7},"action":"insert","lines":["n"]},{"start":{"row":495,"column":7},"end":{"row":495,"column":8},"action":"insert","lines":["v"]},{"start":{"row":495,"column":8},"end":{"row":495,"column":9},"action":"insert","lines":["o"]},{"start":{"row":495,"column":9},"end":{"row":495,"column":10},"action":"insert","lines":["i"]}],[{"start":{"row":495,"column":10},"end":{"row":495,"column":11},"action":"insert","lines":["c"],"id":13},{"start":{"row":495,"column":11},"end":{"row":495,"column":12},"action":"insert","lines":["e"]}],[{"start":{"row":495,"column":5},"end":{"row":495,"column":12},"action":"remove","lines":["invoice"],"id":14},{"start":{"row":495,"column":5},"end":{"row":495,"column":20},"action":"insert","lines":["invoice_details"]}],[{"start":{"row":489,"column":0},"end":{"row":493,"column":1},"action":"remove","lines":["from .invoice_details import (","    get_transaction_date,","    get_transaction_code,","    get_current_date,",")"],"id":15}],[{"start":{"row":494,"column":0},"end":{"row":494,"column":1},"action":"insert","lines":["#"],"id":16}],[{"start":{"row":509,"column":44},"end":{"row":509,"column":67},"action":"remove","lines":["format_transaction_date"],"id":17},{"start":{"row":509,"column":44},"end":{"row":509,"column":64},"action":"insert","lines":["get_transaction_code"]}],[{"start":{"row":516,"column":38},"end":{"row":516,"column":63},"action":"remove","lines":["generate_transaction_code"],"id":18},{"start":{"row":516,"column":38},"end":{"row":516,"column":58},"action":"insert","lines":["get_transaction_code"]}],[{"start":{"row":491,"column":20},"end":{"row":491,"column":21},"action":"insert","lines":["_"],"id":19},{"start":{"row":491,"column":21},"end":{"row":491,"column":22},"action":"insert","lines":["l"]},{"start":{"row":491,"column":22},"end":{"row":491,"column":23},"action":"insert","lines":["i"]},{"start":{"row":491,"column":23},"end":{"row":491,"column":24},"action":"insert","lines":["b"]}],[{"start":{"row":494,"column":0},"end":{"row":495,"column":0},"action":"remove","lines":["#from receipt_lib import format_transaction_date, generate_transaction_code, get_formatted_current_date",""],"id":20},{"start":{"row":493,"column":0},"end":{"row":494,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":491,"column":92},"end":{"row":493,"column":0},"action":"remove","lines":["","",""],"id":21}]]},"ace":{"folds":[],"scrolltop":7038.88916545444,"scrollleft":0,"selection":{"start":{"row":518,"column":5},"end":{"row":518,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1764764923005}